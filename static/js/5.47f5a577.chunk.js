(this["webpackJsonpmy-khata"]=this["webpackJsonpmy-khata"]||[]).push([[5],{189:function(e,t,a){},191:function(e,t,a){},199:function(e,t,a){"use strict";a.r(t);var n=a(73),c=a.n(n),r=a(74),s=a(10),o=a(72),i=a(32),l=a(0),u=a(195),d=a(194),j=a(125),b=a(35),h=a(198),O=a(9),f=a(4),m=a(75),x=a(33),p=a(31),v=a(77),g=a(71),y=a(2),w=function(e){var t=Object(O.useDispatch)(),a=Object(f.g)().bankid,n=Object(l.useState)({date:(new Date).toISOString().split("T")[0],amount:"0",transactionType:"deposit",comments:"",isSalary:!1}),i=Object(o.a)(n,2),u=i[0],w=i[1],k=function(){var n=Object(r.a)(c.a.mark((function n(r){var s,o,i,l,d,j;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),!e.isEdit){n.next=23;break}return delete u.action,n.prev=3,s=new m.a,n.next=7,s.put("bank",u,a);case 7:n.sent,"Account Updated Successfully",t(Object(p.b)()),t(Object(x.c)()),Object(v.a)("Account Updated Successfully","Success"),n.next=21;break;case 14:return n.prev=14,n.t0=n.catch(3),n.next=18,n.t0.json();case 18:o=n.sent,i=o.msg,Object(v.a)(i,"Error");case 21:n.next=41;break;case 23:return n.prev=23,l=new m.a,n.next=27,l.post("bank/".concat(a),u);case 27:n.sent,"Account Created Successfully",t(Object(p.b)()),t(Object(x.c)()),Object(v.a)("Account Created Successfully","Success"),n.next=41;break;case 34:return n.prev=34,n.t1=n.catch(23),n.next=38,n.t1.json();case 38:d=n.sent,j=d.msg,Object(v.a)(j,"Error");case 41:case"end":return n.stop()}}),n,null,[[3,14],[23,34]])})));return function(e){return n.apply(this,arguments)}}();return Object(l.useEffect)((function(){e.isEdit&&w(e.editData)}),[]),Object(y.jsxs)(h.a,{onSubmit:k,children:[Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsxs)(h.a.Group,{controlId:"amount",children:[Object(y.jsx)(h.a.Label,{children:"Enter Amount"}),Object(y.jsx)(h.a.Control,{type:"number",min:"0",name:"amount",placeholder:"Enter Amount",value:u.amount,onChange:function(e){return w((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))}})]})}),Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsxs)(h.a.Group,{controlId:"amttype",children:[Object(y.jsx)(h.a.Label,{children:"Select Type"}),Object(y.jsxs)(h.a.Control,{as:"select",name:"transactionType",value:u.transactionType,onChange:function(e){return w((function(t){var a;return"withdrawal"===e.target.value?Object(s.a)(Object(s.a)({},t),{},(a={},Object(b.a)(a,e.target.name,e.target.value),Object(b.a)(a,"isSalary",!1),a)):Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))},children:[Object(y.jsx)("option",{value:"deposit",children:"Deposit"}),Object(y.jsx)("option",{value:"withdrawal",children:"Withdrawal"})]})]})})]}),Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsxs)(h.a.Group,{controlId:"comments",children:[Object(y.jsx)(h.a.Label,{children:"Comments"}),Object(y.jsx)(h.a.Control,{type:"text",name:"comments",placeholder:"Enter your comment",value:u.comments,onChange:function(e){return w((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))}})]})}),Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select Date"}),Object(y.jsx)(h.a.Control,{type:"date",name:"date",value:u.date,onChange:function(e){return w((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))}})]})})]}),"Salary"===e.accountType&&"withdrawal"!==u.transactionType&&Object(y.jsx)(d.a,{children:Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsx)(h.a.Group,{controlId:"is_salary",children:Object(y.jsx)(h.a.Check,{type:"checkbox",id:"isSalary",label:"Is this your salary",name:"isSalary",checked:u.isSalary,onChange:function(e){return w((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.checked))}))}})})})}),Object(y.jsx)(d.a,{children:Object(y.jsx)(j.a,{sm:"12",md:"12",className:"d-flex justify-content-end",children:Object(y.jsx)(g.a,{type:"submit",children:"Submit"})})})]})},k=a(127),S=a.n(k),N=(a(164),a(165),a(166),a(167)),C=a.n(N),T=a(117),D=a.n(T),E=(a(189),function(e){T.Search.SearchBar;var t=C()({page:1,sizePerPage:5,lastPageText:">>",firstPageText:"<<",prePageText:"<",nextPageText:">",showTotal:!0,alwaysShowAllBtns:!0}),a=e.dataList,n=e.columns,c=Object(i.a)(e,["dataList","columns"]);return Object(y.jsx)(y.Fragment,{children:a&&Object(y.jsx)(S.a,Object(s.a)({bootstrap4:!0,data:a,columns:n,pagination:t,striped:!0,hover:!0,condensed:!0,noDataIndication:"No records",classes:"wrapper",headerWrapperClasses:"tbl-header-footer",footerClasses:"tbl-header-footer"},c))})});a(190);var L={setLoader:p.f,stopLoader:p.h,setInit:p.e,showModal:p.g,closeModal:p.b,clearIsFetch:x.a},R=Object(O.connect)((function(e){return{globalReducer:e.globalReducer,bankReducer:e.bankReducer}}),L)((function(e){var t=Object(f.g)().bankid,a=T.Search.SearchBar,n=e.setLoader,i=e.clearIsFetch,u=e.stopLoader,d=e.setInit,j=e.globalReducer.isLoading,b=Object(l.useState)([]),h=Object(o.a)(b,2),O=h[0],x=h[1],p=e.bankReducer.fetchData,v=Object(l.useState)(0),w=Object(o.a)(v,2),k=w[0],S=w[1],N=Object(y.jsx)("div",{}),C=[{dataField:"date",formatter:function(e,t){return new Date("".concat(e)).toDateString()},text:"Date",sort:!0},{dataField:"amount",text:"Amount",formatter:function(e){return"Rs. ".concat(e)},sort:!0},{dataField:"transactionType",text:"Type",sort:!0},{dataField:"isSalary",text:"Salary?",sort:!0,formatter:function(e){return e?"Yes":"No"}},{dataField:"comments",text:"Comment",formatter:function(e){return e||"-"}},{dataField:"action",text:"Action",formatter:function(a,n,c){if(a)return e.isActive?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(g.a,{className:"mx-2",variant:"info",onClick:function(){return e.onEdit(a,n,c,t)},children:Object(y.jsx)("i",{className:"fa fa-edit text-light","aria-hidden":"true"})}),Object(y.jsx)(g.a,{className:"mx-2",variant:"danger",onClick:function(){return e.onDelete(a,n,c,t)},children:Object(y.jsx)("i",{className:"fa fa-trash text-light","aria-hidden":"true"})})]}):null}}];return C=C.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{footerStyle:{color:"white"},footer:0===t?"Total":1===t?"Rs. ".concat(k.toString(),"/-"):""})})),Object(l.useEffect)((function(){return function(){var e=Object(r.a)(c.a.mark((function e(){var a,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,n(!0),r=new m.a,e.next=5,r.get("bank/".concat(t));case 5:o=e.sent,x(o.data.map((function(e,t){return"deposit"===e.transactionType?a+=parseInt(e.amount):"withdrawal"===e.transactionType&&(a-=parseInt(e.amount)),Object(s.a)(Object(s.a)({},e),{},{action:N})}))),S(a),u(!0),i();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){d(),i()}}),[p]),j?null:Object(y.jsx)(D.a,{keyField:"id",data:O,columns:C,search:!0,children:function(e){return Object(y.jsxs)("div",{className:"d-flex flex-column",children:[Object(y.jsx)(a,Object(s.a)({},e.searchProps)),Object(y.jsx)(E,Object(s.a)({sort:{dataField:"date",order:"desc"},columns:C,dataList:O},e.baseProps))]})}})})),P=a(22),A=a(99);var M={showModal:p.g,closeModal:p.b},I=Object(O.connect)(null,M)((function(e){e.showModal;var t=e.onAdd,a=e.data;return Object(i.a)(e,["showModal","onAdd","data"]),Object(y.jsxs)(A.a,{children:[Object(y.jsx)("div",{className:"mx-2 heading text-light font-weight-bold",children:"".concat(a.accountHolder," - ").concat(a.bankname.toUpperCase()," Bank")}),Object(y.jsx)(P.b,{to:"/".concat("my-khata-fe","/"),children:Object(y.jsx)(g.a,{children:"Bank List"})}),a.isActive&&Object(y.jsx)(g.a,{variant:"info",onClick:t,className:"mx-2",children:"New Enteries"})]})})),F=(a(191),a(83)),B=a(88);var H={showModal:p.g,closeModal:p.b,setConfirmModal:p.d,closeConfirmModal:p.a};t.default=Object(O.connect)((function(e){return{bankReducer:e.bankReducer,globalReducer:e.globalReducer}}),H)((function(e){e.bankReducer;var t=e.showModal,a=e.closeConfirmModal,n=e.setConfirmModal,b=e.globalReducer,h=(Object(i.a)(e,["bankReducer","showModal","closeConfirmModal","setConfirmModal","globalReducer"]),Object(O.useDispatch)()),k=Object(f.f)().state,S=k.accountHolder,N=k.isActive,C=k.bankname,T=k.accountType,D=Object(l.useState)({}),E=Object(o.a)(D,2),L=E[0],P=E[1],A=b.isConfirm,M=Object(l.useState)(!1),H=Object(o.a)(M,2),G=H[0],J=H[1],z=Object(l.useState)({date:(new Date).toISOString().split("T")[0],amount:"0",type:"1",tax:"0"}),U=Object(o.a)(z,2),_=U[0],W=U[1],Y=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new m.a,e.next=4,t.delete("bank",{transactionId:L._id},L.bankid);case 4:e.sent,"Deleted Successfully",h(Object(p.b)()),h(Object(x.c)()),Object(v.a)("Deleted Successfully","Success"),a(),P({}),e.next=22;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,e.t0.json();case 17:n=e.sent,r=n.msg,Object(v.a)(r,"Error"),a(),P({});case 22:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(B.a,{show:A,children:Object(y.jsxs)("div",{className:"d-flex flex-column",children:[L._id&&Object(y.jsxs)("p",{className:"text-center",children:["Are you sure you want to delete this transaction with status :",Object(y.jsx)("br",{}),"Date : ",L.date.split("T")[0],Object(y.jsx)("br",{}),"Type : ",L.transactionType,Object(y.jsx)("br",{}),"Amount : Rs. ",L.amount]}),Object(y.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(y.jsxs)(g.a,{className:"mx-2",variant:"danger",onClick:a,children:[Object(y.jsx)("i",{className:"fa fa-times mx-1 text-light","aria-hidden":"true"}),"No"]}),Object(y.jsxs)(g.a,{className:"mx-2",variant:"primary",children:[Object(y.jsx)("i",{className:"fa fa-check mx-1 text-light","aria-hidden":"true",onClick:Y}),"Yes"]})]})]})}),Object(y.jsx)(F.a,{title:G?"Edit Detail":"Add Detail",children:Object(y.jsx)(w,{accountType:T,isEdit:G,editData:G?_:null})}),Object(y.jsxs)(u.a,{fluid:!0,className:"bankDetailContainer",children:[Object(y.jsx)(d.a,{className:"sticky-header",children:Object(y.jsx)(j.a,{children:Object(y.jsx)(I,{data:{accountHolder:S,isActive:N,bankname:C},onAdd:function(){J(!1),t()}})})}),Object(y.jsx)(d.a,{children:Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:"tableContent",children:Object(y.jsx)(R,{isActive:N,onEdit:function(e,a,n,c){a.date=a.date.split("T")[0],W(a),J(!0),t()},onDelete:function(e,t,a,c){P(Object(s.a)(Object(s.a)({},t),{},{bankid:c})),n()}})})})})]})]})}))},71:function(e,t,a){"use strict";var n=a(10),c=a(32),r=(a(0),a(42),a(200)),s=(a(89),a(2)),o=function(e){var t=e.children,a=e.className,o=e.variant,i=e.icon,l=Object(c.a)(e,["children","className","variant","icon"]);return Object(s.jsxs)(r.a,Object(n.a)(Object(n.a)({className:"".concat(a," buttonDiv"),disabled:e.disabled,variant:o},l),{},{children:[i&&Object(s.jsx)("span",{children:Object(s.jsx)("i",{className:i})}),t]}))};o.defaultProps={size:"sm",type:"button",variant:"primary",disabled:!1},t.a=o},75:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(73),c=a.n(n),r=a(74),s=a(101),o=null,i=function e(){Object(s.a)(this,e),this.post=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,r,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,fetch("".concat("http://localhost:7000","/").concat(t),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a)});case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",Promise.resolve(r));case 12:return e.abrupt("return",Promise.reject(n));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.get=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,fetch("".concat("http://localhost:7000","/").concat(t),{method:"GET",header:{"content-type":"application/json"}});case 3:if(!(a=e.sent).ok){e.next=13;break}return(new Headers).set("Cross-Origin-Embedder-Policy","require-corp"),e.next=9,a.json();case 9:return n=e.sent,e.abrupt("return",Promise.resolve(n));case 13:return e.abrupt("return",Promise.reject(a));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(r.a)(c.a.mark((function e(t,a,n){var r,s,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>3&&void 0!==o[3]?o[3]:{},e.next=3,fetch("".concat("http://localhost:7000","/").concat(t,"/").concat(n),{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify(a)});case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",Promise.resolve(s));case 11:return e.abrupt("return",Promise.reject(r));case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.put=function(){var e=Object(r.a)(c.a.mark((function e(t,a,n){var r,s,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>3&&void 0!==o[3]?o[3]:{},e.next=3,fetch("".concat("http://localhost:7000","/").concat(t,"/").concat(n),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(a)});case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",Promise.resolve(s));case 11:return e.abrupt("return",Promise.reject(r));case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()};function l(){return null===o&&(o=new i),o}},77:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(0);var n=a(20);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";"success"===t.toLowerCase()?n.toastr.success(e):"error"===t.toLowerCase()&&n.toastr.error(e)}},83:function(e,t,a){"use strict";var n=a(32),c=(a(0),a(196)),r=(a(84),a(9)),s=a(31),o=a(2);function i(e){var t=e.globalReducer,a=e.closeModal,r=e.children,s=e.title,i=(Object(n.a)(e,["globalReducer","closeModal","children","title"]),t.show);return Object(o.jsxs)(c.a,{show:i,onHide:function(){a()},children:[Object(o.jsx)(c.a.Header,{closeButton:!0,children:""!==s&&Object(o.jsx)(c.a.Title,{children:s})}),Object(o.jsx)(c.a.Body,{children:r})]})}i.defaultProps={title:""};var l={closeModal:s.b};t.a=Object(r.connect)((function(e){return{globalReducer:e.globalReducer}}),l)(i)},84:function(e,t,a){},88:function(e,t,a){"use strict";var n=a(32),c=a(196),r=(a(0),a(31)),s=a(9),o=a(2);t.a=function(e){var t=e.show,a=e.children,i=e.title,l=(Object(n.a)(e,["show","children","title"]),Object(s.useDispatch)());return Object(o.jsxs)(c.a,{show:t,onHide:function(){l(Object(r.a)())},children:[Object(o.jsx)(c.a.Header,{closeButton:!0,children:Object(o.jsx)(c.a.Title,{children:i||null})}),Object(o.jsx)(c.a.Body,{className:"bg-light",children:a})]})}},89:function(e,t,a){},90:function(e,t,a){},99:function(e,t,a){"use strict";var n=a(72),c=a(0),r=a(71),s=a(2);var o=function(){var e=Object(c.useState)({date:(new Date).toLocaleDateString(),time:(new Date).toLocaleTimeString()}),t=Object(n.a)(e,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){var e=setInterval((function(){r({date:(new Date).toLocaleDateString(),time:(new Date).toLocaleTimeString()})}),1e3);return function(){clearInterval(e)}}),[a]),Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{className:"mx-2",children:[Object(s.jsx)("i",{className:"fa fa-clock"}),a.time]}),Object(s.jsxs)("span",{className:"mx-2",children:[Object(s.jsx)("i",{className:"fa fa-calendar "}),a.date]})]})},i=(a(90),a(33)),l=a(9);t.a=function(e){var t=Object(l.useDispatch)(),a=Object(c.useState)(!1),u=Object(n.a)(a,2),d=u[0],j=u[1],b=Object(c.useState)(window.screen.width),h=Object(n.a)(b,2),O=h[0],f=h[1];return Object(c.useEffect)((function(){return function(){window.removeEventListener("resize",j(!1))}}),[]),window.addEventListener("resize",(function(){f(window.screen.width)})),Object(s.jsxs)("div",{className:"sub-header",children:[Object(s.jsx)("div",{className:"leftEnd",children:Object(s.jsx)(r.a,{onClick:function(){t(Object(i.c)())},children:"Refresh"})}),Object(s.jsx)("div",{className:"hamburger",children:Object(s.jsx)("i",{className:d?"fas fa-times":"fas fa-bars",onClick:function(){j(!d)}})}),Object(s.jsxs)("div",{className:"".concat(O<768?d?"d-flex":"d-none":""," rightEnd"),children:[e.children,Object(s.jsx)(o,{})]})]})}}}]);
//# sourceMappingURL=5.47f5a577.chunk.js.map