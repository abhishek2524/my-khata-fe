(this["webpackJsonpmy-khata"]=this["webpackJsonpmy-khata"]||[]).push([[6],{102:function(e,t,a){"use strict";var n=a(74),c=a(0),r=a(73),s=a(2);var o=function(){var e=Object(c.useState)({date:(new Date).toLocaleDateString(),time:(new Date).toLocaleTimeString()}),t=Object(n.a)(e,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){var e=setInterval((function(){r({date:(new Date).toLocaleDateString(),time:(new Date).toLocaleTimeString()})}),1e3);return function(){clearInterval(e)}}),[a]),Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{className:"mx-2",children:[Object(s.jsx)("i",{className:"fa fa-clock"}),a.time]}),Object(s.jsxs)("span",{className:"mx-2",children:[Object(s.jsx)("i",{className:"fa fa-calendar "}),a.date]})]})},i=(a(93),a(34)),l=a(9),u=a(4);t.a=function(e){var t=Object(u.g)(),a=Object(l.useDispatch)(),d=Object(c.useState)(!1),j=Object(n.a)(d,2),b=j[0],h=j[1],O=Object(c.useState)(window.screen.width),f=Object(n.a)(O,2),m=f[0],x=f[1];return Object(c.useEffect)((function(){return function(){window.removeEventListener("resize",h(!1))}}),[]),window.addEventListener("resize",(function(){x(window.screen.width)})),Object(s.jsxs)("div",{className:"sub-header",children:[Object(s.jsxs)("div",{className:"leftEnd",children:[Object(s.jsx)(r.a,{onClick:function(){a(Object(i.c)())},children:"Refresh"}),Object(s.jsx)(r.a,{variant:"info ml-2",onClick:function(){localStorage.clear(),t.push("".concat("/my-khata-fe","/login"))},children:"Logout"})]}),Object(s.jsx)("div",{className:"hamburger",children:Object(s.jsx)("i",{className:b?"fas fa-times":"fas fa-bars",onClick:function(){h(!b)}})}),Object(s.jsxs)("div",{className:"".concat(m<768?b?"d-flex":"d-none":""," rightEnd"),children:[e.children,Object(s.jsx)(o,{})]})]})}},191:function(e,t,a){},193:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var n=a(75),c=a.n(n),r=a(76),s=a(10),o=a(74),i=a(33),l=a(0),u=a(198),d=a(197),j=a(127),b=a(35),h=a(201),O=a(9),f=a(4),m=a(77),x=a(34),p=a(32),g=a(78),v=a(73),y=a(2),k=function(e){var t=Object(O.useDispatch)(),a=Object(f.i)().bankid,n=Object(l.useState)({date:(new Date).toISOString().split("T")[0],amount:"0",transactionType:"deposit",comments:"",isSalary:!1}),i=Object(o.a)(n,2),u=i[0],k=i[1],w=function(){var n=Object(r.a)(c.a.mark((function n(r){var s,o,i,l,d,j;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),!e.isEdit){n.next=23;break}return delete u.action,n.prev=3,s=new m.a,n.next=7,s.put("bank",u,a);case 7:n.sent,"Account Updated Successfully",t(Object(p.b)()),t(Object(x.c)()),Object(g.a)("Account Updated Successfully","Success"),n.next=21;break;case 14:return n.prev=14,n.t0=n.catch(3),n.next=18,n.t0.json();case 18:o=n.sent,i=o.msg,Object(g.a)(i,"Error");case 21:n.next=41;break;case 23:return n.prev=23,l=new m.a,n.next=27,l.post("bank/".concat(a),u);case 27:n.sent,"Account Created Successfully",t(Object(p.b)()),t(Object(x.c)()),Object(g.a)("Account Created Successfully","Success"),n.next=41;break;case 34:return n.prev=34,n.t1=n.catch(23),n.next=38,n.t1.json();case 38:d=n.sent,j=d.msg,Object(g.a)(j,"Error");case 41:case"end":return n.stop()}}),n,null,[[3,14],[23,34]])})));return function(e){return n.apply(this,arguments)}}();return Object(l.useEffect)((function(){e.isEdit&&k(e.editData)}),[]),Object(y.jsxs)(h.a,{onSubmit:w,children:[Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsxs)(h.a.Group,{controlId:"amount",children:[Object(y.jsx)(h.a.Label,{children:"Enter Amount"}),Object(y.jsx)(h.a.Control,{type:"number",min:"0",name:"amount",placeholder:"Enter Amount",value:u.amount,onChange:function(e){return k((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))}})]})}),Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsxs)(h.a.Group,{controlId:"amttype",children:[Object(y.jsx)(h.a.Label,{children:"Select Type"}),Object(y.jsxs)(h.a.Control,{as:"select",name:"transactionType",value:u.transactionType,onChange:function(e){return k((function(t){var a;return"withdrawal"===e.target.value?Object(s.a)(Object(s.a)({},t),{},(a={},Object(b.a)(a,e.target.name,e.target.value),Object(b.a)(a,"isSalary",!1),a)):Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))},children:[Object(y.jsx)("option",{value:"deposit",children:"Deposit"}),Object(y.jsx)("option",{value:"withdrawal",children:"Withdrawal"})]})]})})]}),Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsxs)(h.a.Group,{controlId:"comments",children:[Object(y.jsx)(h.a.Label,{children:"Comments"}),Object(y.jsx)(h.a.Control,{type:"text",name:"comments",placeholder:"Enter your comment",value:u.comments,onChange:function(e){return k((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))}})]})}),Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select Date"}),Object(y.jsx)(h.a.Control,{type:"date",name:"date",value:u.date,onChange:function(e){return k((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))}})]})})]}),"Salary"===e.accountType&&"withdrawal"!==u.transactionType&&Object(y.jsx)(d.a,{children:Object(y.jsx)(j.a,{sm:"12",md:"6",children:Object(y.jsx)(h.a.Group,{controlId:"is_salary",children:Object(y.jsx)(h.a.Check,{type:"checkbox",id:"isSalary",label:"Is this your salary",name:"isSalary",checked:u.isSalary,onChange:function(e){return k((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(b.a)({},e.target.name,e.target.checked))}))}})})})}),Object(y.jsx)(d.a,{children:Object(y.jsx)(j.a,{sm:"12",md:"12",className:"d-flex justify-content-end",children:Object(y.jsx)(v.a,{type:"submit",children:"Submit"})})})]})},w=a(129),S=a.n(w),N=(a(166),a(167),a(168),a(169)),C=a.n(N),T=a(119),D=a.n(T),E=(a(191),function(e){T.Search.SearchBar;var t=C()({page:1,sizePerPage:5,lastPageText:">>",firstPageText:"<<",prePageText:"<",nextPageText:">",showTotal:!0,alwaysShowAllBtns:!0}),a=e.dataList,n=e.columns,c=Object(i.a)(e,["dataList","columns"]);return Object(y.jsx)(y.Fragment,{children:a&&Object(y.jsx)(S.a,Object(s.a)({bootstrap4:!0,data:a,columns:n,pagination:t,striped:!0,hover:!0,condensed:!0,noDataIndication:"No records",classes:"wrapper",headerWrapperClasses:"tbl-header-footer",footerClasses:"tbl-header-footer"},c))})});a(192);var I={setLoader:p.f,stopLoader:p.h,setInit:p.e,showModal:p.g,closeModal:p.b,clearIsFetch:x.a},L=Object(O.connect)((function(e){return{globalReducer:e.globalReducer,bankReducer:e.bankReducer}}),I)((function(e){var t=Object(f.i)().bankid,a=T.Search.SearchBar,n=e.setLoader,i=e.clearIsFetch,u=e.stopLoader,d=e.setInit,j=e.globalReducer.isLoading,b=Object(l.useState)([]),h=Object(o.a)(b,2),O=h[0],x=h[1],p=e.bankReducer.fetchData,g=Object(l.useState)(0),k=Object(o.a)(g,2),w=k[0],S=k[1],N=Object(y.jsx)("div",{}),C=[{dataField:"date",formatter:function(e,t){return new Date("".concat(e)).toDateString()},text:"Date",sort:!0},{dataField:"amount",text:"Amount",formatter:function(e){return"Rs. ".concat(e)},sort:!0},{dataField:"transactionType",text:"Type",sort:!0},{dataField:"isSalary",text:"Salary?",sort:!0,formatter:function(e){return e?"Yes":"No"}},{dataField:"comments",text:"Comment",formatter:function(e){return e||"-"}},{dataField:"action",text:"Action",formatter:function(a,n,c){if(a)return e.isActive?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(v.a,{className:"mx-2",variant:"info",onClick:function(){return e.onEdit(a,n,c,t)},children:Object(y.jsx)("i",{className:"fa fa-edit text-light","aria-hidden":"true"})}),Object(y.jsx)(v.a,{className:"mx-2",variant:"danger",onClick:function(){return e.onDelete(a,n,c,t)},children:Object(y.jsx)("i",{className:"fa fa-trash text-light","aria-hidden":"true"})})]}):null}}];return C=C.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{footerStyle:{color:"white"},footer:0===t?"Total":1===t?"Rs. ".concat(w.toString(),"/-"):""})})),Object(l.useEffect)((function(){return function(){var e=Object(r.a)(c.a.mark((function e(){var a,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,n(!0),r=new m.a,e.next=5,r.get("bank/".concat(t));case 5:o=e.sent,x(o.data.map((function(e,t){return"deposit"===e.transactionType?a+=parseInt(e.amount):"withdrawal"===e.transactionType&&(a-=parseInt(e.amount)),Object(s.a)(Object(s.a)({},e),{},{action:N})}))),S(a),u(!0),i();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){d(),i()}}),[p]),j?null:Object(y.jsx)(D.a,{keyField:"id",data:O,columns:C,search:!0,children:function(e){return Object(y.jsxs)("div",{className:"d-flex flex-column",children:[Object(y.jsx)(a,Object(s.a)({},e.searchProps)),Object(y.jsx)(E,Object(s.a)({sort:{dataField:"date",order:"desc"},columns:C,dataList:O},e.baseProps))]})}})})),R=a(23),P=a(102);var A={showModal:p.g,closeModal:p.b},M=Object(O.connect)(null,A)((function(e){e.showModal;var t=e.onAdd,a=e.data;return Object(i.a)(e,["showModal","onAdd","data"]),Object(y.jsxs)(P.a,{children:[Object(y.jsx)("div",{className:"mx-2 heading text-light font-weight-bold",children:"".concat(a.accountHolder," - ").concat(a.bankname.toUpperCase()," Bank")}),Object(y.jsx)(R.b,{to:"/".concat("my-khata-fe","/"),children:Object(y.jsx)(v.a,{children:"Bank List"})}),a.isActive&&Object(y.jsx)(v.a,{variant:"info",onClick:t,className:"mx-2",children:"New Enteries"})]})})),F=(a(193),a(87)),B=a(92);var z={showModal:p.g,closeModal:p.b,setConfirmModal:p.d,closeConfirmModal:p.a};t.default=Object(O.connect)((function(e){return{bankReducer:e.bankReducer,globalReducer:e.globalReducer}}),z)((function(e){e.bankReducer;var t=e.showModal,a=e.closeConfirmModal,n=e.setConfirmModal,b=e.globalReducer,h=(Object(i.a)(e,["bankReducer","showModal","closeConfirmModal","setConfirmModal","globalReducer"]),Object(O.useDispatch)()),w=Object(f.h)().state,S=w.accountHolder,N=w.isActive,C=w.bankname,T=w.accountType,D=Object(l.useState)({}),E=Object(o.a)(D,2),I=E[0],R=E[1],P=b.isConfirm,A=Object(l.useState)(!1),z=Object(o.a)(A,2),H=z[0],U=z[1],G=Object(l.useState)({date:(new Date).toISOString().split("T")[0],amount:"0",type:"1",tax:"0"}),J=Object(o.a)(G,2),_=J[0],W=J[1],Y=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new m.a,e.next=4,t.delete("bank",{transactionId:I._id},I.bankid);case 4:e.sent,"Deleted Successfully",h(Object(p.b)()),h(Object(x.c)()),Object(g.a)("Deleted Successfully","Success"),a(),R({}),e.next=22;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,e.t0.json();case 17:n=e.sent,r=n.msg,Object(g.a)(r,"Error"),a(),R({});case 22:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(B.a,{show:P,children:Object(y.jsxs)("div",{className:"d-flex flex-column",children:[I._id&&Object(y.jsxs)("p",{className:"text-center",children:["Are you sure you want to delete this transaction with status :",Object(y.jsx)("br",{}),"Date : ",I.date.split("T")[0],Object(y.jsx)("br",{}),"Type : ",I.transactionType,Object(y.jsx)("br",{}),"Amount : Rs. ",I.amount]}),Object(y.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(y.jsxs)(v.a,{className:"mx-2",variant:"danger",onClick:a,children:[Object(y.jsx)("i",{className:"fa fa-times mx-1 text-light","aria-hidden":"true"}),"No"]}),Object(y.jsxs)(v.a,{className:"mx-2",variant:"primary",children:[Object(y.jsx)("i",{className:"fa fa-check mx-1 text-light","aria-hidden":"true",onClick:Y}),"Yes"]})]})]})}),Object(y.jsx)(F.a,{title:H?"Edit Detail":"Add Detail",children:Object(y.jsx)(k,{accountType:T,isEdit:H,editData:H?_:null})}),Object(y.jsxs)(u.a,{fluid:!0,className:"bankDetailContainer",children:[Object(y.jsx)(d.a,{className:"sticky-header",children:Object(y.jsx)(j.a,{children:Object(y.jsx)(M,{data:{accountHolder:S,isActive:N,bankname:C},onAdd:function(){U(!1),t()}})})}),Object(y.jsx)(d.a,{children:Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:"tableContent",children:Object(y.jsx)(L,{isActive:N,onEdit:function(e,a,n,c){a.date=a.date.split("T")[0],W(a),U(!0),t()},onDelete:function(e,t,a,c){R(Object(s.a)(Object(s.a)({},t),{},{bankid:c})),n()}})})})})]})]})}))},73:function(e,t,a){"use strict";var n=a(10),c=a(33),r=(a(0),a(43),a(203)),s=(a(80),a(2)),o=function(e){var t=e.children,a=e.className,o=e.variant,i=e.icon,l=Object(c.a)(e,["children","className","variant","icon"]);return Object(s.jsxs)(r.a,Object(n.a)(Object(n.a)({className:"".concat(a," buttonDiv"),disabled:e.disabled,variant:o},l),{},{children:[i&&Object(s.jsx)("span",{children:Object(s.jsx)("i",{className:i})}),t]}))};o.defaultProps={size:"sm",type:"button",variant:"primary",disabled:!1},t.a=o},77:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(75),c=a.n(n),r=a(76),s=a(86),o=a(37),i=(a(32),null),l=function e(){Object(s.a)(this,e),this.post=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,r,s,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:{},i.length>2&&void 0!==i[2]?i[2]:{},n=localStorage.getItem("loggedInUser"),e.next=5,fetch("".concat("https://abhishek2524-my-khata.zeet.app","/").concat(t),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Token:n},body:JSON.stringify(a)});case 5:if(!(r=e.sent).ok){e.next=13;break}return e.next=9,r.json();case 9:return s=e.sent,e.abrupt("return",Promise.resolve(s));case 13:return e.next=15,r.json();case 15:return"logout"===e.sent.status&&(localStorage.clear(),Object(o.a)().push("".concat("/my-khata-fe","/login"))),e.abrupt("return",Promise.reject(r));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.get=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,r,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:{},a=localStorage.getItem("loggedInUser"),e.next=4,fetch("".concat("https://abhishek2524-my-khata.zeet.app","/").concat(t),{method:"GET",headers:{"content-type":"application/json",Token:a}});case 4:if(!(n=e.sent).ok){e.next=14;break}return(new Headers).set("Cross-Origin-Embedder-Policy","require-corp"),e.next=10,n.json();case 10:return r=e.sent,e.abrupt("return",Promise.resolve(r));case 14:return e.next=16,n.json();case 16:return"logout"===e.sent.status&&(localStorage.clear(),Object(o.a)().push("".concat("/my-khata-fe","/login"))),e.abrupt("return",Promise.reject(n));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(r.a)(c.a.mark((function e(t,a,n){var r,s,i,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>3&&void 0!==l[3]?l[3]:{},r=localStorage.getItem("loggedInUser"),e.next=4,fetch("".concat("https://abhishek2524-my-khata.zeet.app","/").concat(t,"/").concat(n),{method:"DELETE",headers:{"content-type":"application/json",Token:r},body:JSON.stringify(a)});case 4:if(!(s=e.sent).ok){e.next=12;break}return e.next=8,s.json();case 8:return i=e.sent,e.abrupt("return",Promise.resolve(i));case 12:return e.next=14,s.json();case 14:return"logout"===e.sent.status&&(localStorage.clear(),Object(o.a)().push("".concat("/my-khata-fe","/login"))),e.abrupt("return",Promise.reject(s));case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.put=function(){var e=Object(r.a)(c.a.mark((function e(t,a,n){var r,s,i,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>3&&void 0!==l[3]?l[3]:{},r=localStorage.getItem("loggedInUser"),e.next=4,fetch("".concat("https://abhishek2524-my-khata.zeet.app","/").concat(t,"/").concat(n),{method:"PUT",headers:{"content-type":"application/json",Token:r},body:JSON.stringify(a)});case 4:if(!(s=e.sent).ok){e.next=12;break}return e.next=8,s.json();case 8:return i=e.sent,e.abrupt("return",Promise.resolve(i));case 12:return e.next=14,s.json();case 14:return"logout"===e.sent.status&&(localStorage.clear(),Object(o.a)().push("".concat("/my-khata-fe","/login"))),e.abrupt("return",Promise.reject(s));case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()};function u(){return null===i&&(i=new l),i}},78:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(0);var n=a(20);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";"success"===t.toLowerCase()?n.toastr.success(e):"error"===t.toLowerCase()&&n.toastr.error(e)}},80:function(e,t,a){},87:function(e,t,a){"use strict";var n=a(33),c=(a(0),a(199)),r=(a(88),a(9)),s=a(32),o=a(2);function i(e){var t=e.globalReducer,a=e.closeModal,r=e.children,s=e.title,i=(Object(n.a)(e,["globalReducer","closeModal","children","title"]),t.show);return Object(o.jsxs)(c.a,{show:i,onHide:function(){a()},children:[Object(o.jsx)(c.a.Header,{closeButton:!0,children:""!==s&&Object(o.jsx)(c.a.Title,{children:s})}),Object(o.jsx)(c.a.Body,{children:r})]})}i.defaultProps={title:""};var l={closeModal:s.b};t.a=Object(r.connect)((function(e){return{globalReducer:e.globalReducer}}),l)(i)},88:function(e,t,a){},92:function(e,t,a){"use strict";var n=a(33),c=a(199),r=(a(0),a(32)),s=a(9),o=a(2);t.a=function(e){var t=e.show,a=e.children,i=e.title,l=(Object(n.a)(e,["show","children","title"]),Object(s.useDispatch)());return Object(o.jsxs)(c.a,{show:t,onHide:function(){l(Object(r.a)())},children:[Object(o.jsx)(c.a.Header,{closeButton:!0,children:Object(o.jsx)(c.a.Title,{children:i||null})}),Object(o.jsx)(c.a.Body,{className:"bg-light",children:a})]})}},93:function(e,t,a){}}]);
//# sourceMappingURL=6.ca1030d5.chunk.js.map